openapi: 3.0.0
x-stoplight:
  id: 0f56e32f16f60
info:
  title: IFS07 - List of title changes / Elenco variazioni titoli
  x-summary: Acquires the updated qualification list for each student. / Acquisisce la lista dei titoli aggiornati per ogni studente.
  version: 1.0.0
  description: |
    Requires a list of the last active qualification for each course of study in the last 10 academic years. / Richiede la lista degli ultimi titoli attivi per ogni corso di studi negli ultimi 10 anni accademici.
  contact:
    name: helpdesk
    email: helpdesk@gmail.com
  x-api-id: 00000000-0000-0000-0000-000000000000
  termsOfService: 'http://swagger.io/terms/'
  license:
    name: Apache 2.0
    url: 'http://www.apache.org/licenses/LICENSE-2.0.html'
paths:
  '/student-qualifications-changes':
    parameters:
      - name: cursor
        in: query
        required: false
        schema:
          type: string
          description: Cursor / Cursore
          maxLength: 100
          minLength: 1
      - name: institute_code
        in: query
        required: false
        schema:
          type: string
          maxLength: 32
          minLength: 1
          description: Institute code / Codice istituto
    get:
      summary: Retrieve of "fingerprints (hash codes)" for all academic titles to identify variations from the recipient's perspective. / Acquisizione delle "impronte (codifica hash)" di tutti i titoli accademici al fine di identificarne le variazioni dal punto di vista del fruitore
      tags:
        - student-qualifications-changes
      security: [{}]
      responses:
        '200':
          description: Request successfully executed / Richiesta eseguita con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/student-qualifications-changes'
              examples:
                Example statuscode=200:
                  value:
                    data:
                      institute_code: C6
                      last_update: '2023-10-13'
                      qualifications_hash:
                        - key: '8e44f796d7478a135c226598939d56a5b0d9405210235d4845ed158a7fec7535'
                          hash: '56c3880bfcc4df0e35780c805d9ec942bbb8b4e237c1b63c6f2688cb58ef0a3a'
                        - key: '8e44f796d7478a135c226598939d56a5b0d9405210235d4845ed158a7fec7535'
                          hash: '56c3880bfcc4df0e35780c80sdlkjljiirpepw85830t3j85jg0fj054fj04jf03'
                        - key: '8e44f796d7478a135c226598939d56a5b0d9405210235d4845ed158a7fec7535'
                          hash: 'df8340f834tr8f3j84fj48jf83fngooero45305jf30l04k0r43kfd043kdew34t'
                    meta:
                      cursor: '6eyJpZCI6M57'
        '400':
          description: One of the input fields appears to be missing / Risulta mancante uno dei campi di input
        '404':
          description: No qualifications were found at this institution / Non sono stati trovati titoli in questo istituto
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/student-qualifications-changes'
              examples:
                Example statuscode=404:
                  value:
                    data: 
                      institute_code: C6
                      last_update: '2023-10-13'
                      qualifications_hash: []
                    meta:
        '500':
          description: Internal server error / Errore interno del server 
      operationId: Enrollments-of-student
      description: Returning the information reduced to a 'hash (SHA256)' for each student in the form (key, value), where the key is the hash of the student's social security number and the value is the hash of the student's qualifications. / Restituisce le informazioni ridotte in "hash (SHA256)" per ogni studente/studentessa nella forma (chiave, valore), dove la chiave è l'hash del codice fiscale dello studente e il valore è l'hash dei suoi titoli.
      parameters: []
  /status:
    get:
      summary: Verifica stato delle API (Health Check)
      security: [{}]
      operationId: check-status
      description: Check the system's health status / Verificare lo stato di salute del sistema 
      tags:
        - health-check
      responses:
        '204':
          description: The service is running correctly / Il servizio è in esecuzione correttamente
        '500':
          description:  The service is not running. / Il servizio non è in esecuzione. 
components:
  headers:
    Retry-After:
      description: |-
        Retry contacting the endpoint *at least* after seconds.
        See https://tools.ietf.org/html/rfc7231#section-7.1.3
      schema:
        format: int32
        maximum: 186400
        minimum: 0
        type: integer
    X-RateLimit-Limit:
      description: The number of allowed requests in the current period / Numero di richieste consentite nel periodo attuale
      schema:
        format: int32
        maximum: 1000000
        minimum: 0
        type: integer
    X-RateLimit-Remaining:
      description: The number of remaining requests in the current period / Numero di richieste rimanenti nel periodo attuale 
      schema:
        format: int32
        maximum: 1000000
        minimum: 0
        type: integer
    X-RateLimit-Reset:
      description: The number of seconds left in the current period / Numero di secondi rimanenti nel periodo attuale
      schema:
        format: int32
        maximum: 186400
        minimum: 0
        type: integer
  schemas:
    student-qualifications-changes:
      additionalProperties: false
      type: object
      x-examples:
        Example 1:
          data:
            institute_code: C6
            last_update: '2023-10-13 17:23:26'
            qualifications_hash:
              - key: '8e44f796d7478a135c226598939d56a5b0d9405210235d4845ed158a7fec7535'
                hash: '56c3880bfcc4df0e35780c805d9ec942bbb8b4e237c1b63c6f2688cb58ef0a3a'
              - key: '8e44f796d7478a135c226598939d56a5b0d9405210235d4845ed158a7fec7535'
                hash: '56c3880bfcc4df0e35780c80sdlkjljiirpepw85830t3j85jg0fj054fj04jf03'
              - key: '8e44f796d7478a135c226598939d56a5b0d9405210235d4845ed158a7fec7535'
                hash: 'df8340f834tr8f3j84fj48jf83fngooero45305jf30l04k0r43kfd043kdew34t'
          meta:
            - cursor: '6eyJpZCI6M57'
      description: Returning the information reduced to a 'hash (SHA256)' for each student in the form (key, value), where the key is the hash of the student's social security number and the value is the hash of the student's qualifications. / Restituisce le informazioni ridotte in "hash (SHA256)" per ogni studente/studentessa nella forma (chiave, valore), dove la chiave è l'hash del codice fiscale dello studente e il valore è l'hash dei suoi titoli.
      x-stoplight:
        id: 22de4be4ac251
      properties:
        data:
          $ref: '#/components/schemas/data'
        meta:
            $ref: '#/components/schemas/meta'
      required:
        - data
        - meta
    meta:
      type: object
      additionalProperties: false
      nullable: true
      x-examples:
        Example 1:
          cursor: 'o2j4230jd4043'
      description: Informazioni del cursore
      properties:
        cursor:
          type: string
          description: Cursor / Cursore
          example: 'fowfio543s'
          readOnly: true
          minLength: 1
          maxLength: 100
      required:
        - cursor
    data:
      type: object
      additionalProperties: false
      x-jsonld-type: https://w3id.org/italia/onto/xxx/yyy
      x-jsonld-context:
        '@vocab': http://w3id.org/italia/onto/xxx/
        institute_code: institute_code
      x-examples:
        Example 1:
          institute_code: C6
          last_update: '2023-10-13 17:23:26'
          qualifications_hash:
            - key: '4e12345678986dd33377c0da06031'
              hash: '56c3880bfcc4df0e35780c805d9ec942bbb8b4e237c1b63c6f2688cb58ef0a3a'
            - key: 'adsjojr45678986dd333asofrm456'
              hash: 'odjwofweoo4952r9349dj39j349jf4fmd394fjfaforkdikdwi59fmmdm3oo4rjj'
      description: Personal data of the student / Dati personali della studentessa o dello studente
      properties:
        institute_code:
          type: string
          description: Institutional identification code / Codice identificativo dell’istituto
          example: 'C3'
          readOnly: true
          minLength: 2
          maxLength: 2
        last_update:
          type: string
          format: date
          description: Date last updated / Data ultimo aggiornamento
          example: '2023-10-13'
          readOnly: true
        qualifications_hash:
          type: array
          minItems: 0
          description: List of qualifications for student / Elenco iscrizioni di una studentessa o di uno studente
          items:
            $ref: '#/components/schemas/qualifications_hash'
    qualifications_hash:
      type: object
      additionalProperties: false
      x-examples:
        Example 1:
          key: 8e44f796d7478a135c226598939d56a5b0d9405210235d4845ed158a7fec7535
          hash: 9bc4e295f51d940db6d7a9ca01059ace00376d4feed10225c592e010a780a8d5
      description: Detailed qualification information / Informazioni dettagliate sul titoli
      properties:
        key:
          type: string
          description: Hash tax code / Hash del codice fiscale
          example: '8e44f796d7478a135c226598939d56a5b0d9405210235d4845ed158a7fec7535'
          readOnly: true
          minLength: 64
          maxLength: 64
        hash:
          type: string
          description: Enrollments hash code / Codice hash delle iscrizioni
          example: '9bc4e295f51d940db6d7a9ca01059ace00376d4feed10225c592e010a780a8d5'
          readOnly: true
          minLength: 64
          maxLength: 64
      required:
        - key
        - hash
  requestBodies: {}
  responses: {}
servers:
  - url: 'https://localhost:8080/api'
    description: localhost
tags:
  - name: student-qualifications-changes
  - name: health-check