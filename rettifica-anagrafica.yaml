openapi: 3.0.0
x-stoplight:
  id: 0f56e32f16f60
info:
  title: API riferimento ANIS
  x-summary: Questo servizio aggiornare i dati relativi all'anagrafica di uno studente.
  version: 1.0.0
  description: |-
    ### Documentazione

    ## API riferimento ANIS
    La seguente documentazione API fornisce un riferimento per l'integrazione e 
    l'accesso ai dati ANIS (Anagrafe degli Studenti) relativi alle università. 
    Queste API consentono l'erogazione di servizi (e-service) che operano sui dati ANIS.

    # API Health Check
    Questa API fornisce un modo semplice per verificare lo stato di salute del sistema. 
    È un endpoint di base che può essere utilizzato per controllare se il servizio è in esecuzione correttamente.

    **Endpoint:**   GET  /status

    # Elenco campi anagrafica 
    Questa API fornisce l'elenco di tutti i campi modificabili in un'anagrafica studente. 
    Ogni elemento di questo elenco riporterà nome, descrizione, tipo e pattern del campo anagrafica.

    **Endpoint:**   GET  /rettifica-anagrafica/campi

    **Esempio body richiesta:**
    ```json
    {
      "fields": [
        {
          "fieldName": "instituteName",
          "fieldDescription": "Nome dell'istituto",
          "fieldType": "string",
          "fieldPattern": "^[A-Za-z ]+$"
        },
        {
          "fieldName": "courseName",
          "fieldDescription": "Nome del corso",
          "fieldType": "string",
          "fieldPattern": "^[A-Za-z ]+$"
        },
        {
          "fieldName": "courseType",
          "fieldDescription": "Tipologia del corso di studio",
          "fieldType": "string",
          "fieldPattern": "^[A-Za-z ]+$"
        }
      ]
    }


    # Rettifica anagrafica studente
    Questa API consente di aggiornare i dati anagrafici di uno studente nel sistema ANIS. Utilizzando questo servizio, è possibile apportare modifiche ai dati relativi ai titoli e all'iscrizione di uno studente.

    **Endpoint:**   POST  /rettifica-anagrafica/{taxCode}

    **Params:**    `{taxCode}`: Il Codice Fiscale (CF) dello studente.

    **Esempio body richiesta:**
    ```json
    {
      "fieldsToEdit": [
        {
          "fieldName": "instituteName",
          "oldValue": "Università degli studi di Milano",
          "newValue": "Università degli studi di Roma 'La Sapienza'"
        },
        {
          "fieldName": "courseType",
          "oldValue": "Laurea",
          "newValue": "Laurea Magistrale"
        },
        {
          "fieldName": "academicYear",
          "oldValue": "2021/2022",
          "newValue": "2022/2023"
        },
        {
          "fieldName": "courseYear",
          "oldValue": "3° anno",
          "newValue": "1° anno"
        }
      ],
      "rectificationReqText": "Testo con la richiesta di rettifica",
      "openNotes": "Note aperte dello studente/ex studente"
    }


    **Esempio di risposta:**
    ```json
    {
      "rectificationId": "2A9BCD3E4F567890"
    }

    # Elenco rettifiche anagrafica studente 
    Questa API fornisce l'elenco di tutte le richieste di rettifica anagrafica che sono state fatte per uno specifico studente. Dato il codice fiscale o identificativo ANPR.
    Ogni elemento di questo elenco riporterà l'identificativo e alcune informazioni relative alla singola rettifica.

    **Endpoint:**   GET  /rettifiche-anagrafica/

    **Params:**    `{taxCode}`: Il Codice Fiscale (CF) dello studente.

    **Esempio body richiesta:**
    ```json
    {
      "rectificationList": [
        {
          "rectificationId": "2A9BCD3E4F567890",
          "state": "Presa in carico",
          "date": "2023-02-12",
          "rectificationReqText": "Modifica dati personali",
          "openNotes": "Note operte"
        },
        {
          "rectificationId": "3B3ACD3E4L123450",
          "state": "In lavorazione",
          "date": "2023-03-18",
          "rectificationReqText": "Modifica dati personali",
          "openNotes": "Note operte"
        },
        {
          "rectificationId": "4B6AEF3E4F248101",
          "state": "Accettata",
          "date": "2023-05-02",
          "rectificationReqText": "Modifica dati personali",
          "openNotes": "Note operte"
        },
        {
          "rectificationId": "5B1ACD3E4L123450",
          "state": "Rifiutata",
          "date": "2023-06-23",
          "rectificationReqText": "Modifica dati personali",
          "openNotes": "Note operte"
        }
      ]
    }


    # Dettaglio rettifica anagrafica
    Questa API consente di recuperare il dettaglio di una specifica rettifica anagrafica. In particolare, nella risposta, oltre all'identificativo della rettifica, è riportato lo stato attuale, la cronologia di stati, i campi che sono stati modificati con i valori precedenti e successivi, le note.

    **Endpoint:**   GET  /rettifica-anagrafica/dettaglio/{rectificationId}

    **Params:**    `{rectificationId}`: L'identificativo della richiesta di rettifica anagrafica.

    **Esempio di risposta:**
    ```json
    {
      "rectificationId": "2A9BCD3E4F567890",
      "state": "Accettata",
      "fieldEdited": [
        {
          "fieldName": "courseType",
          "oldValue": "Laurea",
          "newValue": "Laurea Magistrale"
        },
        {
          "fieldName": "academicYear",
          "oldValue": "2021/2022",
          "newValue": "2022/2023"
        }
      ],
      "stateHistory": [
        {
          "state": "Accettata",
          "date": "2023-06-10",
          "description": "Descrizione del passaggio di stato"
        },
        {
          "state": "In lavorazione",
          "date": "2023-03-05",
          "description": "Descrizione del passaggio di stato"
        },
        {
          "state": "Presa in carico",
          "date": "2023-02-25",
          "description": "Descrizione del passaggio di stato"
        }
      ],
      "rectificationReqText": "Testo con la richiesta di rettifica",
      "openNotes": "Note aperte dello studente/ex studente"
    }
  contact:
    name: helpdesk
    email: helpdesk@gmail.com
  x-api-id: 00000000-0000-0000-0000-000000000000
  termsOfService: 'http://swagger.io/terms/'
  license:
    name: Apache 2.0
    url: 'http://www.apache.org/licenses/LICENSE-2.0.html'
paths:
  /status:
    get:
      summary: Health Check
      operationId: check-status
      description: Verificare lo stato di salute del sistema
      tags:
        - HEALTH-CHECK
      responses:
        '204':
          description: il servizio è in esecuzione correttamente.
        '500':
          description: il servizio non è in esecuzione.
  /rettifica-anagrafica/campi:
    get:
      summary: Elenco campi anagrafica studente
      tags:
        - CAMPI-ANAGRAFICA
      parameters:
        - schema:
            type: string
          in: header
          name: Method
          description: Specifica il metodo HTTP utilizzato per la richiesta.
        - schema:
            type: string
          in: header
          name: Path
          description: Specifica il percorso o l'endpoint dell'API a cui viene indirizzata la richiesta.
        - schema:
            type: string
          in: header
          name: Scheme
          description: 'Specifica lo schema o il protocollo utilizzato per la comunicazione tra il client e il server, come HTTP o HTTPS.'
        - schema:
            type: string
          in: header
          name: Accept-Encoding
          description: 'Utilizzato per indicare al server le opzioni di compressione supportate dal client, come gzip o deflate.'
        - schema:
            type: string
          in: header
          name: Accept-Language
          description: 'Utilizzato per indicare al server la lingua preferita per la risposta, in modo che possa restituire la risposta nella lingua corretta, se disponibile.'
        - schema:
            type: string
          in: header
          name: Origin
          description: 'Utilizzato in contesti di sicurezza per indicare l''origine della richiesta, ad esempio durante le richieste CORS (Cross-Origin Resource Sharing).'
        - schema:
            type: string
          in: header
          name: User-Agent
          description: 'Utilizzato per identificare il client che sta effettuando la richiesta, ad esempio il browser e la versione utilizzata.'
      responses:
        '200':
          description: Richiesta eseguita con successo
          headers:
            Content-Length:
              schema:
                type: integer
                format: int64
              description: 'utilizzato per indicare la dimensione del corpo della risposta, consentendo al client di gestire correttamente la ricezione dei dati.'
            Cache-Control:
              schema:
                type: string
              description: 'utilizzato per indicare al client o ai server intermedi come gestire la memorizzazione nella cache della risposta, ad esempio "no-cache" per impedire la memorizzazione nella cache.'
            Access-Control-Allow-Origin:
              schema:
                type: string
              description: utilizzato per consentire a determinati origini di accedere alle risorse tramite richieste cross-origin.
            X-RateLimit-Limit:
              schema:
                type: integer
                format: int64
              description: specifica il numero massimo di richieste consentite entro un determinato periodo di tempo (solitamente misurato in secondi).
            X-RateLimit-Remaining:
              schema:
                type: integer
                format: int64
              description: utilizzato per indicare il numero di richieste API rimanenti all'interno del periodo di tempo specificato dal server.
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
              description: utilizzato per indicare il momento in cui il limite delle richieste API verrà ripristinato.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CampiAnagrafica'
              examples:
                Example 1:
                  value:
                    fields:
                      - fieldName: instituteName
                        fieldDescription: Nome dell'istituto
                        fieldType: string
                        fieldPattern: '^[A-Za-z ]+$'
                      - fieldName: courseName
                        fieldDescription: Nome del corso
                        fieldType: string
                        fieldPattern: '^[A-Za-z ]+$'
                      - fieldName: courseType
                        fieldDescription: Tipologia del corso di studio
                        fieldType: string
                        fieldPattern: '^[A-Za-z ]+$'
        '500':
          description: Errore interno del server
          headers:
            Content-Length:
              schema:
                type: integer
                format: int64
              description: 'utilizzato per indicare la dimensione del corpo della risposta, consentendo al client di gestire correttamente la ricezione dei dati.'
            Cache-Control:
              schema:
                type: string
              description: 'utilizzato per indicare al client o ai server intermedi come gestire la memorizzazione nella cache della risposta, ad esempio "no-cache" per impedire la memorizzazione nella cache.'
            Access-Control-Allow-Origin:
              schema:
                type: string
              description: utilizzato per consentire a determinati origini di accedere alle risorse tramite richieste cross-origin.
            X-RateLimit-Limit:
              schema:
                type: integer
                format: int64
              description: specifica il numero massimo di richieste consentite entro un determinato periodo di tempo (solitamente misurato in secondi).
            X-RateLimit-Remaining:
              schema:
                type: integer
                format: int64
              description: utilizzato per indicare il numero di richieste API rimanenti all'interno del periodo di tempo specificato dal server.
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
              description: utilizzato per indicare il momento in cui il limite delle richieste API verrà ripristinato.
      operationId: campi-rettifica-anagrafica
      description: Restituisce l'elenco dei campi modificabili dell'anagrafica studente
    parameters: []
  '/rettifica-anagrafica/{taxCode}':
    post:
      summary: Rettifica anagrafica studente
      operationId: rettifica-anagrafica-studente
      tags:
        - RETTIFICA-ANAGRAFICA
      parameters:
        - schema:
            type: string
          in: header
          name: Method
          description: Specifica il metodo HTTP utilizzato per la richiesta.
        - schema:
            type: string
          in: header
          name: Path
          description: Specifica il percorso o l'endpoint dell'API a cui viene indirizzata la richiesta.
        - schema:
            type: string
          in: header
          name: Scheme
          description: 'Specifica lo schema o il protocollo utilizzato per la comunicazione tra il client e il server, come HTTP o HTTPS.'
        - schema:
            type: string
          in: header
          name: Accept-Encoding
          description: 'Utilizzato per indicare al server le opzioni di compressione supportate dal client, come gzip o deflate.'
        - schema:
            type: string
          in: header
          name: Accept-Language
          description: 'Utilizzato per indicare al server la lingua preferita per la risposta, in modo che possa restituire la risposta nella lingua corretta, se disponibile.'
        - schema:
            type: string
          in: header
          name: Origin
          description: 'Utilizzato in contesti di sicurezza per indicare l''origine della richiesta, ad esempio durante le richieste CORS (Cross-Origin Resource Sharing).'
        - schema:
            type: string
          in: header
          name: User-Agent
          description: 'Utilizzato per identificare il client che sta effettuando la richiesta, ad esempio il browser e la versione utilizzata.'
      responses:
        '200':
          description: Richiesta eseguita con successo
          headers:
            Content-Length:
              schema:
                type: integer
                format: int64
              description: 'utilizzato per indicare la dimensione del corpo della risposta, consentendo al client di gestire correttamente la ricezione dei dati.'
            Cache-Control:
              schema:
                type: string
              description: 'utilizzato per indicare al client o ai server intermedi come gestire la memorizzazione nella cache della risposta, ad esempio "no-cache" per impedire la memorizzazione nella cache.'
            Access-Control-Allow-Origin:
              schema:
                type: string
              description: utilizzato per consentire a determinati origini di accedere alle risorse tramite richieste cross-origin.
            X-RateLimit-Limit:
              schema:
                type: integer
                format: int64
              description: specifica il numero massimo di richieste consentite entro un determinato periodo di tempo (solitamente misurato in secondi).
            X-RateLimit-Remaining:
              schema:
                type: integer
                format: int64
              description: utilizzato per indicare il numero di richieste API rimanenti all'interno del periodo di tempo specificato dal server.
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
              description: utilizzato per indicare il momento in cui il limite delle richieste API verrà ripristinato.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RettificaAnagraficaRes'
              examples:
                Example 1:
                  value:
                    rectificationId: 2A9BCD3E4F567890
        '404':
          description: Studente non trovato
          headers:
            Content-Length:
              schema:
                type: integer
                format: int64
              description: 'utilizzato per indicare la dimensione del corpo della risposta, consentendo al client di gestire correttamente la ricezione dei dati.'
            Cache-Control:
              schema:
                type: string
              description: 'utilizzato per indicare al client o ai server intermedi come gestire la memorizzazione nella cache della risposta, ad esempio "no-cache" per impedire la memorizzazione nella cache.'
            Access-Control-Allow-Origin:
              schema:
                type: string
              description: utilizzato per consentire a determinati origini di accedere alle risorse tramite richieste cross-origin.
            X-RateLimit-Limit:
              schema:
                type: integer
                format: int64
              description: specifica il numero massimo di richieste consentite entro un determinato periodo di tempo (solitamente misurato in secondi).
            X-RateLimit-Remaining:
              schema:
                type: integer
                format: int64
              description: utilizzato per indicare il numero di richieste API rimanenti all'interno del periodo di tempo specificato dal server.
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
              description: utilizzato per indicare il momento in cui il limite delle richieste API verrà ripristinato.
        '500':
          description: Errore interno del server
          headers:
            Content-Length:
              schema:
                type: integer
                format: int64
              description: 'utilizzato per indicare la dimensione del corpo della risposta, consentendo al client di gestire correttamente la ricezione dei dati.'
            Cache-Control:
              schema:
                type: string
              description: 'utilizzato per indicare al client o ai server intermedi come gestire la memorizzazione nella cache della risposta, ad esempio "no-cache" per impedire la memorizzazione nella cache.'
            Access-Control-Allow-Origin:
              schema:
                type: string
              description: utilizzato per consentire a determinati origini di accedere alle risorse tramite richieste cross-origin.
            X-RateLimit-Limit:
              schema:
                type: integer
                format: int64
              description: specifica il numero massimo di richieste consentite entro un determinato periodo di tempo (solitamente misurato in secondi).
            X-RateLimit-Remaining:
              schema:
                type: integer
                format: int64
              description: utilizzato per indicare il numero di richieste API rimanenti all'interno del periodo di tempo specificato dal server.
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
              description: utilizzato per indicare il momento in cui il limite delle richieste API verrà ripristinato.
      description: Permette la rettifica dei dati anagrafici di uno studente nel sistema ANIS.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RettificaAnagraficaReq'
            examples:
              Example 1:
                value:
                  fieldsToEdit:
                    - fieldName: instituteName
                      oldValue: Università degli studi di Milano
                      newValue: Università degli studi di Roma 'La Sapienza'
                    - fieldName: courseType
                      oldValue: Laurea
                      newValue: Laurea Magistrale
                    - fieldName: academicYear
                      oldValue: 2021/2022
                      newValue: 2022/2023
                    - fieldName: courseYear
                      oldValue: 3° anno
                      newValue: 1° anno
                  rectificationReqText: Testo con la richiesta di rettifica
                  openNotes: Note aperte dello studente/ex studente
          application/xml:
            schema:
              type: object
              properties: {}
        description: ''
    parameters:
      - schema:
          type: string
        name: taxCode
        in: path
        required: true
        description: Codice Fiscale Studente
  '/rettifiche-anagrafica/{taxCode}':
    parameters:
      - schema:
          type: string
        name: taxCode
        in: path
        required: true
        description: Codice Fiscale studente
    get:
      summary: Elenco rettifiche anagrafica studente
      tags:
        - RETTIFICHE-ANAGRAFICA-STUDENTE
      parameters:
        - schema:
            type: string
          in: header
          name: Method
          description: Specifica il metodo HTTP utilizzato per la richiesta.
        - schema:
            type: string
          in: header
          name: Path
          description: Specifica il percorso o l'endpoint dell'API a cui viene indirizzata la richiesta.
        - schema:
            type: string
          in: header
          name: Scheme
          description: 'Specifica lo schema o il protocollo utilizzato per la comunicazione tra il client e il server, come HTTP o HTTPS.'
        - schema:
            type: string
          in: header
          name: Accept-Encoding
          description: 'Utilizzato per indicare al server le opzioni di compressione supportate dal client, come gzip o deflate.'
        - schema:
            type: string
          in: header
          name: Accept-Language
          description: 'Utilizzato per indicare al server la lingua preferita per la risposta, in modo che possa restituire la risposta nella lingua corretta, se disponibile.'
        - schema:
            type: string
          in: header
          name: Origin
          description: 'Utilizzato in contesti di sicurezza per indicare l''origine della richiesta, ad esempio durante le richieste CORS (Cross-Origin Resource Sharing).'
        - schema:
            type: string
          in: header
          name: User-Agent
          description: 'Utilizzato per identificare il client che sta effettuando la richiesta, ad esempio il browser e la versione utilizzata.'
      responses:
        '200':
          description: Richiesta eseguita con successo
          headers:
            Content-Length:
              schema:
                type: integer
                format: int64
              description: 'utilizzato per indicare la dimensione del corpo della risposta, consentendo al client di gestire correttamente la ricezione dei dati.'
            Cache-Control:
              schema:
                type: string
              description: 'utilizzato per indicare al client o ai server intermedi come gestire la memorizzazione nella cache della risposta, ad esempio "no-cache" per impedire la memorizzazione nella cache.'
            Access-Control-Allow-Origin:
              schema:
                type: string
              description: utilizzato per consentire a determinati origini di accedere alle risorse tramite richieste cross-origin.
            X-RateLimit-Limit:
              schema:
                type: integer
                format: int64
              description: specifica il numero massimo di richieste consentite entro un determinato periodo di tempo (solitamente misurato in secondi).
            X-RateLimit-Remaining:
              schema:
                type: integer
                format: int64
              description: utilizzato per indicare il numero di richieste API rimanenti all'interno del periodo di tempo specificato dal server.
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
              description: utilizzato per indicare il momento in cui il limite delle richieste API verrà ripristinato.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ElencoRettifiche'
              examples:
                Example 1:
                  value:
                    rectificationList:
                      - rectificationId: 2A9BCD3E4F567890
                        status: Presa in carico
                        date: '2023-02-12'
                        rectificationReqText: Modifica dati personali
                        openNotes: Note operte
                      - rectificationId: 3B3ACD3E4L123450
                        status: In lavorazione
                        date: '2023-03-18'
                        rectificationReqText: Modifica dati personali
                        openNotes: Note operte
                      - rectificationId: 4B6AEF3E4F248101
                        status: Accettata
                        date: '2023-05-02'
                        rectificationReqText: Modifica dati personali
                        openNotes: Note operte
                      - rectificationId: 5B1ACD3E4L123450
                        status: Rifiutata
                        date: '2023-06-23'
                        rectificationReqText: Modifica dati personali
                        openNotes: Note operte
                Example 2:
                  value:
                    rectificationList: []
        '404':
          description: Studente non trovato
          headers:
            Content-Length:
              schema:
                type: integer
                format: int64
              description: 'utilizzato per indicare la dimensione del corpo della risposta, consentendo al client di gestire correttamente la ricezione dei dati.'
            Cache-Control:
              schema:
                type: string
              description: 'utilizzato per indicare al client o ai server intermedi come gestire la memorizzazione nella cache della risposta, ad esempio "no-cache" per impedire la memorizzazione nella cache.'
            Access-Control-Allow-Origin:
              schema:
                type: string
              description: utilizzato per consentire a determinati origini di accedere alle risorse tramite richieste cross-origin.
            X-RateLimit-Limit:
              schema:
                type: integer
                format: int64
              description: specifica il numero massimo di richieste consentite entro un determinato periodo di tempo (solitamente misurato in secondi).
            X-RateLimit-Remaining:
              schema:
                type: integer
                format: int64
              description: utilizzato per indicare il numero di richieste API rimanenti all'interno del periodo di tempo specificato dal server.
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
              description: utilizzato per indicare il momento in cui il limite delle richieste API verrà ripristinato.
        '500':
          description: Errore interno del server
          headers:
            Content-Length:
              schema:
                type: integer
                format: int64
              description: 'utilizzato per indicare la dimensione del corpo della risposta, consentendo al client di gestire correttamente la ricezione dei dati.'
            Cache-Control:
              schema:
                type: string
              description: 'utilizzato per indicare al client o ai server intermedi come gestire la memorizzazione nella cache della risposta, ad esempio "no-cache" per impedire la memorizzazione nella cache.'
            Access-Control-Allow-Origin:
              schema:
                type: string
              description: utilizzato per consentire a determinati origini di accedere alle risorse tramite richieste cross-origin.
            X-RateLimit-Limit:
              schema:
                type: integer
                format: int64
              description: specifica il numero massimo di richieste consentite entro un determinato periodo di tempo (solitamente misurato in secondi).
            X-RateLimit-Remaining:
              schema:
                type: integer
                format: int64
              description: utilizzato per indicare il numero di richieste API rimanenti all'interno del periodo di tempo specificato dal server.
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
              description: utilizzato per indicare il momento in cui il limite delle richieste API verrà ripristinato.
      operationId: rettifiche-anagrafica-studente
      description: 'Permette di recuperare, tramite il codice fiscale, l''elenco delle richieste di rettifica anagrafica di uno specifico studente.'
  '/rettifica-anagrafica/dettaglio/{rectificationId}':
    parameters:
      - schema:
          type: string
        name: rectificationId
        in: path
        required: true
        description: Identificativo della rettifica
    get:
      summary: Dettaglio rettifica anagrafica studente
      tags:
        - DETTAGLIO-RETTIFICA-ANAGRAFICA
      parameters:
        - schema:
            type: string
          in: header
          name: Method
          description: Specifica il metodo HTTP utilizzato per la richiesta.
        - schema:
            type: string
          in: header
          name: Path
          description: Specifica il percorso o l'endpoint dell'API a cui viene indirizzata la richiesta.
        - schema:
            type: string
          in: header
          name: Scheme
          description: 'Specifica lo schema o il protocollo utilizzato per la comunicazione tra il client e il server, come HTTP o HTTPS.'
        - schema:
            type: string
          in: header
          name: Accept-Encoding
          description: 'Utilizzato per indicare al server le opzioni di compressione supportate dal client, come gzip o deflate.'
        - schema:
            type: string
          in: header
          name: Accept-Language
          description: 'Utilizzato per indicare al server la lingua preferita per la risposta, in modo che possa restituire la risposta nella lingua corretta, se disponibile.'
        - schema:
            type: string
          in: header
          name: Origin
          description: 'Utilizzato in contesti di sicurezza per indicare l''origine della richiesta, ad esempio durante le richieste CORS (Cross-Origin Resource Sharing).'
        - schema:
            type: string
          in: header
          name: User-Agent
          description: 'Utilizzato per identificare il client che sta effettuando la richiesta, ad esempio il browser e la versione utilizzata.'
      responses:
        '200':
          description: Richiesta eseguita con successo
          headers:
            Content-Length:
              schema:
                type: integer
                format: int64
              description: 'utilizzato per indicare la dimensione del corpo della risposta, consentendo al client di gestire correttamente la ricezione dei dati.'
            Cache-Control:
              schema:
                type: string
              description: 'utilizzato per indicare al client o ai server intermedi come gestire la memorizzazione nella cache della risposta, ad esempio "no-cache" per impedire la memorizzazione nella cache.'
            Access-Control-Allow-Origin:
              schema:
                type: string
              description: utilizzato per consentire a determinati origini di accedere alle risorse tramite richieste cross-origin.
            X-RateLimit-Limit:
              schema:
                type: integer
                format: int64
              description: specifica il numero massimo di richieste consentite entro un determinato periodo di tempo (solitamente misurato in secondi).
            X-RateLimit-Remaining:
              schema:
                type: integer
                format: int64
              description: utilizzato per indicare il numero di richieste API rimanenti all'interno del periodo di tempo specificato dal server.
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
              description: utilizzato per indicare il momento in cui il limite delle richieste API verrà ripristinato.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DettaglioRettifica'
              examples:
                Example 1:
                  value:
                    rectificationId: 2A9BCD3E4F567890
                    state: Accettata
                    fieldEdited:
                      - fieldName: courseType
                        oldValue: Laurea
                        newValue: Laurea Magistrale
                      - fieldName: academicYear
                        oldValue: 2021/2022
                        newValue: 2022/2023
                    stateHistory:
                      - state: Accettata
                        date: '2023-06-10'
                        description: Descrizione del passaggio di stato
                      - state: In lavorazione
                        date: '2023-03-05'
                        description: Descrizione del passaggio di stato
                      - state: Presa in carico
                        date: '2023-02-25'
                        description: Descrizione del passaggio di stato
                    rectificationReqText: Testo con la richiesta di rettifica
                    openNotes: Note aperte dello studente/ex studente
        '404':
          description: Rettifica anagrafica non trovata
          headers:
            Content-Length:
              schema:
                type: integer
                format: int64
              description: 'utilizzato per indicare la dimensione del corpo della risposta, consentendo al client di gestire correttamente la ricezione dei dati.'
            Cache-Control:
              schema:
                type: string
              description: 'utilizzato per indicare al client o ai server intermedi come gestire la memorizzazione nella cache della risposta, ad esempio "no-cache" per impedire la memorizzazione nella cache.'
            Access-Control-Allow-Origin:
              schema:
                type: string
              description: utilizzato per consentire a determinati origini di accedere alle risorse tramite richieste cross-origin.
            X-RateLimit-Limit:
              schema:
                type: integer
                format: int64
              description: specifica il numero massimo di richieste consentite entro un determinato periodo di tempo (solitamente misurato in secondi).
            X-RateLimit-Remaining:
              schema:
                type: integer
                format: int64
              description: utilizzato per indicare il numero di richieste API rimanenti all'interno del periodo di tempo specificato dal server.
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
              description: utilizzato per indicare il momento in cui il limite delle richieste API verrà ripristinato.
        '500':
          description: Errore interno del server
          headers:
            Content-Length:
              schema:
                type: integer
                format: int64
              description: 'utilizzato per indicare la dimensione del corpo della risposta, consentendo al client di gestire correttamente la ricezione dei dati.'
            Cache-Control:
              schema:
                type: string
              description: 'utilizzato per indicare al client o ai server intermedi come gestire la memorizzazione nella cache della risposta, ad esempio "no-cache" per impedire la memorizzazione nella cache.'
            Access-Control-Allow-Origin:
              schema:
                type: string
              description: utilizzato per consentire a determinati origini di accedere alle risorse tramite richieste cross-origin.
            X-RateLimit-Limit:
              schema:
                type: integer
                format: int64
              description: specifica il numero massimo di richieste consentite entro un determinato periodo di tempo (solitamente misurato in secondi).
            X-RateLimit-Remaining:
              schema:
                type: integer
                format: int64
              description: utilizzato per indicare il numero di richieste API rimanenti all'interno del periodo di tempo specificato dal server.
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
              description: utilizzato per indicare il momento in cui il limite delle richieste API verrà ripristinato.
      operationId: dettaglio-rettifica-anagrafica-studente
      description: Permette di recuperare il dettaglio di una richiesta di rettifica anagrafica tramite il suo identificativo.
components:
  schemas:
    CampiAnagrafica:
      type: object
      x-examples:
        Example 1:
          fields:
            - fieldName: instituteName
              fieldDescription: Nome dell'istituto
              fieldType: string
              fieldPattern: '^[A-Za-z ]+$'
            - fieldName: courseName
              fieldDescription: Nome del corso
              fieldType: string
              fieldPattern: '^[A-Za-z ]+$'
            - fieldName: courseType
              fieldDescription: Tipologia del corso di studio
              fieldType: string
              fieldPattern: '^[A-Za-z ]+$'
      properties:
        fields:
          type: array
          items:
            type: object
            properties:
              fieldName:
                type: string
                description: Nome del campo anagrafica
              fieldDescription:
                type: string
                description: Descrizione del campo anagrafica
              fieldType:
                type: string
                description: Tipo del campo anagrafica
              fieldPattern:
                type: string
                description: Pattern del campo anagrafica
    RettificaAnagraficaReq:
      type: object
      x-examples:
        Example 1:
          fieldsToEdit:
            - fieldName: instituteName
              oldValue: Università degli studi di Milano
              newValue: Università degli studi di Roma 'La Sapienza'
            - fieldName: courseType
              oldValue: Laurea
              newValue: Laurea Magistrale
            - fieldName: academicYear
              oldValue: 2021/2022
              newValue: 2022/2023
            - fieldName: courseYear
              oldValue: 3° anno
              newValue: 1° anno
          rectificationReqText: Testo con la richiesta di rettifica
          openNotes: Note aperte dello studente/ex studente
      properties:
        fieldsToEdit:
          type: array
          description: Elenco dei campi da modificare
          items:
            type: object
            properties:
              fieldName:
                type: string
                description: Nome del campo da modificare
                readOnly: true
              oldValue:
                type: string
                description: Valore attuale del campo
              newValue:
                type: string
                description: Nuovo valore da attribuire al campo
                readOnly: true
            required:
              - fieldName
              - oldValue
              - newValue
        rectificationReqText:
          type: string
          description: Testo con la richiesta di rettifica
          readOnly: true
        openNotes:
          type: string
          description: Note aperte dello studente/ex studente
          readOnly: true
      required:
        - fieldsToEdit
        - rectificationReqText
        - openNotes
    RettificaAnagraficaRes:
      type: object
      x-examples:
        Example 1:
          rectificationId: 2A9BCD3E4F567890
      description: Risposta avvenuta rettifica anagrafica studente
      properties:
        rectificationId:
          type: string
          description: 'Identificativo della rettifica anagrafica effettuata '
          example: 2A9BCD3E4F567890
          minLength: 16
          maxLength: 16
          readOnly: true
    ElencoRettifiche:
      type: object
      x-examples:
        Example 1:
          rectificationList:
            - rectificationId: 2A9BCD3E4F567890
              state: Presa in carico
              date: '2023-02-12'
              rectificationReqText: Modifica dati personali
              openNotes: Note operte
            - rectificationId: 3B3ACD3E4L123450
              state: In lavorazione
              date: '2023-03-18'
              rectificationReqText: Modifica dati personali
              openNotes: Note operte
            - rectificationId: 4B6AEF3E4F248101
              state: Accettata
              date: '2023-05-02'
              rectificationReqText: Modifica dati personali
              openNotes: Note operte
            - rectificationId: 5B1ACD3E4L123450
              state: Rifiutata
              date: '2023-06-23'
              rectificationReqText: Modifica dati personali
              openNotes: Note operte
      description: Elenco delle rettifiche anagrafiche di uno studente
      properties:
        rectificationList:
          type: array
          description: Elenco delle rettifiche anagrafiche di uno studente
          items:
            type: object
            properties:
              rectificationId:
                type: string
                description: Identificativo delle rettifica
                readOnly: true
              state:
                type: string
                description: Stato attuale della rettifica
                readOnly: true
              date:
                type: string
                format: date
                description: Data ultima transizione rettifica
                readOnly: true
              rectificationReqText:
                type: string
                description: Testo con la richiesta di rettifica
                readOnly: true
              openNotes:
                type: string
                description: Note aperte dello studente/ex studente
                readOnly: true
    DettaglioRettifica:
      type: object
      x-examples:
        Example 1:
          rectificationId: 2A9BCD3E4F567890
          state: Accettata
          fieldEdited:
            - fieldName: courseType
              oldValue: Laurea
              newValue: Laurea Magistrale
            - fieldName: academicYear
              oldValue: 2021/2022
              newValue: 2022/2023
          stateHistory:
            - state: Accettata
              date: '2023-06-10'
              description: Descrizione del passaggio di stato
            - state: In lavorazione
              date: '2023-03-5'
              description: Descrizione del passaggio di stato
            - state: Presa in carico
              date: '2023-02-25'
              description: Descrizione del passaggio di stato
          rectificationReqText: Testo con la richiesta di rettifica
          openNotes: Note aperte dello studente/ex studente
      description: Dettaglio di una rettifica anagrafica studente
      properties:
        rectificationId:
          type: string
          description: 'Identificativo della rettifica '
          readOnly: true
        state:
          type: string
          description: stato attuale della rettifica
          readOnly: true
        fieldEdited:
          type: array
          description: campi e valori da modificare
          items:
            type: object
            properties:
              fieldName:
                type: string
                description: nome del campo anagrafica
                readOnly: true
              oldValue:
                type: string
                description: vecchio valore del campo
                readOnly: true
              newValue:
                type: string
                description: nuovo valore del campo
                readOnly: true
        stateHistory:
          type: array
          description: Cronologia delle transizioni di stato
          items:
            type: object
            properties:
              state:
                type: string
                description: valore dello stato
                readOnly: true
              date:
                type: string
                format: date
                description: data corrispondente alla transizione di stato
                readOnly: true
              description:
                type: string
                description: descrizione del passaggio di stato
                readOnly: true
        rectificationReqText:
          type: string
          description: Testo con la richiesta di rettifica
          readOnly: true
        openNotes:
          type: string
          description: Note aperte dello studente/ex studente
          readOnly: true
  requestBodies: {}
  responses: {}
servers:
  - url: 'https://localhost:8080/api'
    description: localhost
tags:
  - name: API-ANIS
  - name: HEALTH-CHECK
  - name: RETTIFICA-ANAGRAFICA
  - name: CAMPI-ANAGRAFICA
  - name: RETTIFICHE-ANAGRAFICA-STUDENTE
  - name: DETTAGLIO-RETTIFICA-ANAGRAFICA
